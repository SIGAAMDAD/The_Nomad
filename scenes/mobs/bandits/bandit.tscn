[gd_scene load_steps=22 format=3 uid="uid://dil6cvnitkb3b"]

[ext_resource type="Shader" uid="uid://ci77l6g215lyf" path="res://shaders/visor_glow_blue.gdshader" id="1_q3nyr"]
[ext_resource type="Script" uid="uid://cg547d4tqtl3s" path="res://scripts/renown/Thinkers/Bandit.cs" id="1_sse78"]
[ext_resource type="SpriteFrames" uid="uid://dkqmricfe235j" path="res://resources/animations/mobs/bandit_grunt_head_animations.tres" id="2_q3nyr"]
[ext_resource type="Script" uid="uid://ya6g5a1ll81k" path="res://scripts/Hitbox.cs" id="3_02k6i"]
[ext_resource type="SpriteFrames" uid="uid://hvxaope63nbh" path="res://resources/animations/mobs/bandit_grunt_body_animations.tres" id="4_q3nyr"]
[ext_resource type="SpriteFrames" uid="uid://dt3nr18ulah26" path="res://resources/animations/mobs/bandit_grunt_arm_animations.tres" id="5_q3nyr"]
[ext_resource type="Script" uid="uid://d11c6gwrjou0w" path="res://addons/behaviour_toolkit/behaviour_tree/bt_root.gd" id="7_2b6m4"]
[ext_resource type="Script" uid="uid://csq05x4oq8uf3" path="res://addons/behaviour_toolkit/blackboard.gd" id="8_agrwk"]
[ext_resource type="Script" uid="uid://8rcyavsdmew5" path="res://addons/behaviour_toolkit/behaviour_tree/composites/bt_selector.gd" id="9_2b6m4"]
[ext_resource type="Script" uid="uid://dpr2xa1e5hy8u" path="res://addons/behaviour_toolkit/behaviour_tree/composites/bt_sequence.gd" id="9_rj0kc"]
[ext_resource type="Script" uid="uid://uvffj6edmq73" path="res://scripts/renown/Thinkers/Behaviours/is_relaxed.gd" id="11_2sbjv"]
[ext_resource type="Script" uid="uid://b26n4e0kvlmwa" path="res://scripts/renown/Thinkers/Behaviours/sight_check.gd" id="11_rj0kc"]
[ext_resource type="Script" uid="uid://dstmrjfx8r618" path="res://scripts/renown/Thinkers/Behaviours/move_to_disturbance.gd" id="12_yadcl"]
[ext_resource type="Script" uid="uid://bl25rod6blkxk" path="res://scripts/renown/Thinkers/Behaviours/is_suspicious.gd" id="13_n1021"]
[ext_resource type="Script" uid="uid://bts0yymqfnj5o" path="res://addons/behaviour_toolkit/behaviour_tree/decorators/decorator_repeat.gd" id="15_q4sce"]
[ext_resource type="Script" uid="uid://c81txbqu41pa" path="res://scripts/renown/Thinkers/Behaviours/change_investigation_angle.gd" id="16_n1021"]
[ext_resource type="Script" uid="uid://buvb8uppbyosm" path="res://addons/behaviour_toolkit/behaviour_tree/leaves/leaf_wait.gd" id="17_q4sce"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lqbnx"]
shader = ExtResource("1_q3nyr")
shader_parameter/glow_color = Color(0, 0.133333, 0.541176, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sv13l"]
size = Vector2(11, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gnc44"]
size = Vector2(18, 21)

[sub_resource type="Resource" id="Resource_yadcl"]
script = ExtResource("8_agrwk")
content = {}
metadata/_custom_type_script = "uid://csq05x4oq8uf3"

[node name="Bandit" type="CharacterBody2D" node_paths=PackedStringArray("BehaviourTree", "Relations", "Debts") groups=["Archive", "Thinkers"]]
z_index = 6
collision_layer = 12
collision_mask = 12
script = ExtResource("1_sse78")
LoseInterestTime = 10.0
SightDetectionTime = 15.0
SightDetectionSpeed = 1600.0
BehaviourTree = NodePath("BTRoot")
MovementSpeed = 120.0
Health = 80.0
Relations = {}
Debts = {}

[node name="Animations" type="Node2D" parent="."]
process_mode = 1

[node name="HeadAnimations" type="AnimatedSprite2D" parent="Animations"]
material = SubResource("ShaderMaterial_lqbnx")
position = Vector2(0, -7)
sprite_frames = ExtResource("2_q3nyr")
animation = &"idle"
autoplay = "idle"

[node name="HeadHitbox" type="Area2D" parent="Animations/HeadAnimations" node_paths=PackedStringArray("Parent")]
collision_layer = 16
collision_mask = 16
script = ExtResource("3_02k6i")
Parent = NodePath("../../..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Animations/HeadAnimations/HeadHitbox"]
position = Vector2(0.5, -1)
shape = SubResource("RectangleShape2D_sv13l")

[node name="BodyAnimations" type="AnimatedSprite2D" parent="Animations"]
sprite_frames = ExtResource("4_q3nyr")
animation = &"idle"
autoplay = "calm"

[node name="SmokeEmitter" type="CPUParticles2D" parent="Animations/BodyAnimations"]
position = Vector2(4, -6)
emitting = false
amount = 50
lifetime = 2.0
one_shot = true
emission_shape = 1
emission_sphere_radius = 4.0
gravity = Vector2(0, -50)
angle_min = -4.5
angle_max = 65.1

[node name="ArmAnimations" type="AnimatedSprite2D" parent="Animations"]
position = Vector2(1, -3)
sprite_frames = ExtResource("5_q3nyr")
animation = &"idle"

[node name="VisibleOnScreenNotifier2D" type="VisibleOnScreenNotifier2D" parent="."]
position = Vector2(59, -10)
scale = Vector2(6.7, 4.6)
rect = Rect2(-10.8955, -2.82609, 4.92537, 9.13043)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 7.5)
shape = SubResource("RectangleShape2D_gnc44")

[node name="DetectionMeter" type="Line2D" parent="."]
position = Vector2(11, 0)
points = PackedVector2Array(-25, -19, 4, -19)
width = 6.0

[node name="AttackMeter" type="Line2D" parent="."]
visible = false
modulate = Color(0, 1, 0, 1)
position = Vector2(11, 0)
points = PackedVector2Array(-25, -19, 4, -19)
width = 6.0

[node name="BTRoot" type="Node" parent="." node_paths=PackedStringArray("actor")]
script = ExtResource("7_2b6m4")
process_type = 0
actor = NodePath("..")
blackboard = SubResource("Resource_yadcl")
verbose = true
metadata/_custom_type_script = "uid://d11c6gwrjou0w"

[node name="Select" type="Node" parent="BTRoot"]
script = ExtResource("9_2b6m4")
metadata/_custom_type_script = "uid://8rcyavsdmew5"

[node name="Relaxed" type="Node" parent="BTRoot/Select"]
script = ExtResource("9_rj0kc")
metadata/_custom_type_script = "uid://dpr2xa1e5hy8u"

[node name="IsRelaxed" type="Node" parent="BTRoot/Select/Relaxed"]
script = ExtResource("11_2sbjv")
metadata/_custom_type_script = "uid://c584shlo6w6it"

[node name="CanSeeThreat" type="Node" parent="BTRoot/Select/Relaxed"]
script = ExtResource("11_rj0kc")
metadata/_custom_type_script = "uid://c584shlo6w6it"

[node name="Suspicious" type="Node" parent="BTRoot/Select"]
script = ExtResource("9_rj0kc")
metadata/_custom_type_script = "uid://dpr2xa1e5hy8u"

[node name="IsSuspicious" type="Node" parent="BTRoot/Select/Suspicious"]
script = ExtResource("13_n1021")
metadata/_custom_type_script = "uid://c584shlo6w6it"

[node name="CanSeeThreat" type="Node" parent="BTRoot/Select/Suspicious"]
script = ExtResource("11_rj0kc")
metadata/_custom_type_script = "uid://c584shlo6w6it"

[node name="MoveToThreatLocation" type="Node" parent="BTRoot/Select/Suspicious"]
script = ExtResource("12_yadcl")
metadata/_custom_type_script = "uid://c584shlo6w6it"

[node name="LookAround" type="Node" parent="BTRoot/Select/Suspicious"]
script = ExtResource("9_rj0kc")
metadata/_custom_type_script = "uid://dpr2xa1e5hy8u"

[node name="LookAround" type="Node" parent="BTRoot/Select/Suspicious/LookAround"]
script = ExtResource("15_q4sce")
repetition = 2
on_limit = 0
metadata/_custom_type_script = "uid://bts0yymqfnj5o"

[node name="ChangeInvestigationAngle" type="Node" parent="BTRoot/Select/Suspicious/LookAround/LookAround"]
script = ExtResource("16_n1021")
metadata/_custom_type_script = "uid://c584shlo6w6it"

[node name="LeafWait" type="Node" parent="BTRoot/Select/Suspicious/LookAround"]
script = ExtResource("17_q4sce")
wait_time = 1.25
metadata/_custom_type_script = "uid://buvb8uppbyosm"
